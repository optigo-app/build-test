"use strict";(self.webpackChunkecomm_web=self.webpackChunkecomm_web||[]).push([[7943],{27943:(e,o,t)=>{t.r(o),t.d(o,{default:()=>p});var s=t(9950),n=t(46639),i=t(8145),l=t(10226),r=t(28429),a=(t(9210),t(85923)),c=t(6001),d=t(40282),g=t(58322),u=t(39137),m=t(44414);function p(){const[e,o]=(0,s.useState)(""),[t,p]=(0,s.useState)({}),[x,h]=(0,s.useState)(!1),f=(0,r.Zp)(),[y,v]=(0,s.useState)(""),[S,C]=(0,s.useState)(120),b=(0,g.lZ)(u.uJ),j=(0,r.zy)(),N=null===j||void 0===j?void 0:j.search,T=N.replace("?LoginRedirect=",""),I=`${decodeURIComponent(T)}`,w=`/LoginOption/${N}`;(0,s.useEffect)((()=>{(async()=>{const e=sessionStorage.getItem("registerEmail");if(e){o(e);"true"===sessionStorage.getItem("LoginCodeEmail")&&(sessionStorage.setItem("LoginCodeEmail","false"),(0,c.v)(e).then((e=>{"1"===e.Data.Table1[0].stat?a.oR.success("OTP send Sucssessfully"):a.oR.error("OTP send Error")})).catch((e=>console.log(e))))}})()}),[]),(0,s.useEffect)((()=>{if(S>0){const e=setInterval((()=>{C((o=>0===o?(clearInterval(e),0):o-1))}),1e3);return()=>clearInterval(e)}}),[S]);const k=async()=>{y.trim()?(h(!0),(0,d.I)(e,"",y,"otp_email_login","").then((e=>{var o,s;h(!1),1===(null===e||void 0===e||null===(o=e.Data)||void 0===o||null===(s=o.rd[0])||void 0===s?void 0:s.stat)?(b(!0),sessionStorage.setItem("LoginUser",!0),sessionStorage.setItem("loginUserDetail",JSON.stringify(e.Data.rd[0])),f(I||"/")):t.mobileNo="Code is Invalid"})).catch((e=>console.log(e)))):t.mobileNo="Code is required"};return(0,m.jsxs)("div",{className:"Hoq_loginwithemailCode",style:{paddingTop:"10px"},children:[(0,m.jsx)(a.N9,{style:{zIndex:999999}}),x&&(0,m.jsx)("div",{className:"loader-overlay",children:(0,m.jsx)(n.A,{className:"loadingBarManage"})}),(0,m.jsx)("div",{children:(0,m.jsxs)("div",{className:"smling-forgot-main",children:[(0,m.jsx)("p",{style:{textAlign:"center",paddingBlock:"60px",marginTop:"15px",fontSize:"40px",color:"#7d7f85"},className:"AuthScreenMainTitle",children:"Login With Code"}),(0,m.jsxs)("p",{style:{textAlign:"center",marginTop:"-80px",fontSize:"15px",color:"#7d7f85"},className:"AuthScreenSubTitle",children:["Last step! To secure your account, enter the code we just sent to"," ",e,"."]}),(0,m.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"20px"},children:[(0,m.jsx)(i.A,{autoFocus:!0,id:"outlined-basic",label:"Enter Code",variant:"outlined",className:"labgrowRegister",style:{margin:"15px"},onKeyDown:e=>{"Enter"===e.key&&k()},value:y,onChange:e=>((e,o,t)=>{const{value:s}=e.target;o(s),"mobileNo"===t&&(s.trim()?p((e=>({...e,mobileNo:""}))):p((e=>({...e,mobileNo:"Code is required"}))))})(e,v,"mobileNo"),error:!!t.mobileNo,helperText:t.mobileNo}),(0,m.jsx)("button",{className:"submitBtnForgot",onClick:k,children:"Login"}),(0,m.jsxs)("p",{style:{marginTop:"10px"},children:["Didn't get the code ?"," ",0===S?(0,m.jsx)("span",{style:{fontWeight:500,color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:async()=>{C(120),(0,c.v)(e).then((e=>{"1"===e.Data.Table1[0].stat?(sessionStorage.setItem("LoginCodeEmail","false"),a.oR.success("OTP send Sucssessfully")):a.oR.error("OTP send Error")})).catch((e=>console.log(e)))},children:"Resend Code"}):(0,m.jsxs)("span",{children:["Resend in"," ",Math.floor(S/60).toString().padStart(2,"0"),":",(S%60).toString().padStart(2,"0")]})]}),(0,m.jsx)(l.A,{style:{marginTop:"10px",color:"gray"},onClick:()=>f(w),children:"CANCEL"})]})]})}),(0,m.jsx)("div",{style:{display:"flex",justifyContent:"center",paddingBlock:"30px"},children:(0,m.jsx)("p",{style:{margin:"0px",fontWeight:500,width:"100px",color:"white",cursor:"pointer"},onClick:()=>window.scrollTo(0,0),children:"BACK TO TOP"})})]})}}}]);